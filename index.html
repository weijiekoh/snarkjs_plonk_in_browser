<!doctype html>
<html>
<head>
  <title>Plonk proof generation in the browser</title>
</head>
<body>

  <h1>Plonk proof generation in the browser</h1>
  <button id="bGenProof"> Create proof </button>

  <!-- JS-generated output will be added here. -->
  <pre class="time"> Time taken: <code id="time"></code></pre>

  <pre class="proof"> Valid?: <code id="result"></code></pre>

  <pre class="proof"> Proof: <code id="proof"></code></pre>

  <script src="./node_modules/snarkjs/build/snarkjs.min.js">   </script>


  <!-- This is the bundle generated by rollup.js -->
  <script>

const proofCompnent = document.getElementById('proof');
const resultComponent = document.getElementById('result');
const timeComponent = document.getElementById('time');
const bGenProof = document.getElementById("bGenProof");

bGenProof.addEventListener("click", calculateProof);

async function calculateProof() {

    const start = Date.now();
    const { proof, publicSignals } =
      await snarkjs.plonk.fullProve( {in: [0, 0]}, "zkeys/Hasher_2-1.test.wasm", "zkeys/Hasher_2-1.test.zkey");

    const end = Date.now();
    const timeTaken = ((end - start) / 1000).toString() + ' seconds';

    timeComponent.innerHTML = timeTaken;

    proofCompnent.innerHTML = JSON.stringify(proof, null, 1);

    const vkey = await fetch("zkeys/verification_key.json").then( function(res) {
        return res.json();
    });

    const res = await snarkjs.plonk.verify(vkey, publicSignals, proof);

    resultComponent.innerHTML = res;
}

  </script>

</body>
</html>
